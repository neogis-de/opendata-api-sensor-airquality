CREATE DATABASE airquality;

\connect airquality;

CREATE USER airq WITH PASSWORD 'nach0s';
GRANT ALL PRIVILEGES ON DATABASE airquality TO airq;

CREATE TABLE measurements (
	stationid CHARACTER(9),
	system    SMALLINT,
	datetime  TIMESTAMP,
	param     SMALLINT,
	value     REAL,
	UNIQUE(stationid, system, datetime, param)
);

GRANT ALL PRIVILEGES ON TABLE measurements TO airq;

DROP TABLE stations;
CREATE TABLE stations (
	stationid CHARACTER(9),
	system    SMALLINT,
	name      VARCHAR(255),
	lat 			REAL,
	lon       REAL,
	elev      REAL,
  pt 				GEOGRAPHY(POINT,4326),
  UNIQUE(stationid)
);

CREATE INDEX ptindx ON stations USING gist (pt);

GRANT ALL PRIVILEGES ON TABLE stations TO airq;